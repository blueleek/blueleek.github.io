---
layout: post
title:  "推荐系统多样性优化"
date:       2024-08-19
author:     胡笛笛
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 推荐系统
    - 推荐系统业务实践
---

Hi，这里是笛~ 一个搜推广策略产品方向持续创作者。今天和大家聊一聊推荐系统多样性如何优化？文章拆分为几个部分，我自称为 2W2H1C 原则，hahha，灵感也是来源于近期求职咨询小伙伴在推荐系统多样性优化项目中遇到的面试问题。

#  一、What 什么是多样性？
考虑推荐的实际应用场景，一般从两个角度对多样性进行定义，即个体层面的多样性和系统层面的多样性：

* 个人层面的多样性主要集中在为用户提供多样化的推荐结果。以新闻推荐为例，同质化新闻会强化用户已有的认知，产生计划的扩散效应。
* 系统层面的多样性指的是不同供应商之间的公平曝光。这种定义下，公平性和长尾推荐都可以表示为系统级的多样性。

站在用户视角看，推荐系统的多样性反映了一个推荐列表中「内容不相似」的程度，通过推荐更多样的内容，既能给用户更多机会去发现内容，也能让推荐系统更容易发现用户潜在兴趣。但需要注意，精确性和多样性是一对 Trade Off，提升多样性的代价往往以牺牲准确性为代价，因此如何平衡准确性和多样性需要权衡。这部分在第三部分，优化多样性的难点也有提及。

从类型来看，推荐系统多样性可以拆分为「个体多样性」、「总体多样性」、「时序多样性」等主要类型。

* 个体多样性：个体多样性从单个用户视角衡量推荐系统的多样性，考察系统能够找到用户喜欢的冷门项目的能
* 总体多样性：系统多样性主要强调针对不同用户的推荐应尽可能的不同，避免持续向用户意见热门物品，忽略了长尾物品
* 时序多样性：时序多样性是指用户兴趣的动态进化或者用户情景的时变，即与过去的推荐相比，新的推荐体现出的多样性


#  二、Why 为什么需要优化多样性？

从消费者和生产者的视角来看：

* Customer：从消费视角看，用户本身可能有多方面的兴趣，但对不同领域/类型的偏好存在差异。然而，推荐算法端训练时只强调了用户的部分主流兴趣，导致头部过拟合、尾部欠拟合的问题。久而久之，过曝光效应导致了过滤气泡和信息茧房的问题，用户逐渐对推荐结果感到乏味，影响客户留存率和满意度

* Provider：对于生产者而言，他们可能会面临曝光分布不均的问题，即头部的创作者将占据流量主导地位，威胁小商家或新创作者的流量获取，垄断的创作者流量分布格局将影响推荐平台的长期发展

从指标体系设计视角来看，实践证明多样性可以帮助提升时长、点击、用户长期留存等核心业务指标。


# 三、How to measure 如何衡量多样性？
无法衡量就无法优化，衡量相似性的评价指标通常包含以下几类：

* ILS（intra-list similarity） - 列表内相似性：ILS 主要是针对单个用户，一般来说 ILS 值越大，单个用户推荐列表多样性越差。
其中， 和 为Item， 为推荐列表长度， (.) 为相似性度量。

* 海明距离(Hamming distance)
其中， 为推荐列表长度， 为系统推荐给用户 和 两个推荐列表中相同Item的数量。 衡量了不同用户间的推荐结果的差异性，其值越大说明不同用户间的多样性程度越高。

* SSD (self-system diversity)
SSD 指推荐列表中没有包含在以前的推荐列表中的比例，主要考察推荐结果的时序的多样性。
其中， −1 是 的上一次推荐， / −1={ ∈ | ∉ −1} 。SSD值越小，推荐列表的时序多样性越好。

* 覆盖率（coverage）
覆盖率是推荐给用户的 Item 占所有 Item 的比例，用来衡量对长尾 Item 的推荐能力。

* K 次重复率
在一次推荐请求中，同一类别的 Item 连续出现 K 次的比率。

# 四、Challenges 业务中多样性优化难点？
推荐系统中，准确度一直衡量推荐系统质量最重要的指标，作为推荐策略产品，我们日常大多数的工作也都是围绕提升准确度。然后推荐系统的质量是通过多个维度来衡量的，越来越多的研究表明，仅依赖准确度的推荐已经不能满足用户的需要，反而容易产生信息茧房。于是，如何在准确性和多样性之间进行权衡和协同优化，从而提高业务的整体数据指标是当前推荐系统的又一重要的优化方向。然而，在具体实践中，我们发现一些难点，最常见问题是：

** 业务指标和多样性指标的冲突 **，业务关注的指标（转化率、停留时长等）和多样性不是简单的正向或者负向的关系。如果单纯为了提高多样性指标而做多样性，反而会导致最终结果与业务目标偏离，使推荐质量下降。

** 那么问题来了，如何评估当前系统是否需要着手优化多样性？**

** 我们需要时刻记住多样性不是目的而是一种用来优化用户体验进而提高用户留存的手段，万万不可为了优化多样性而优化。** 那么只有当多样性能够显著影响用户留存的因子时，才需要花费大力气去优化（通常代表着产品供给已经有了一定沉淀，品类供给足够丰富用于用户探索兴趣）。那么如何评估多样性是否成了我们产品增长的核心问题？

具体分析思路可以参考 Google 的 Surrogate 分析法，即挖掘一些更为即时的用户反馈指标作为留存等长期价值的替代指标来优化。我们定义多样性为中间指标，我们采用低频转高频（L-H）vs 持续低频（L-L）进行对比，研究与多样性与用户频次提升（留存）是否具备相关性。

基于 Google 的研究论文中相关信息，我们会发现当用户在长期内频繁地访问平台时，它们逐渐消费更大的主题集合，但随着时间的推移发展出更集中的兴趣。如上图所示，当低频用户向高频用户过渡时，他们逐步消费更多话题。然后，当我们查看基于比例的多样性时，我们看到了相反的趋势，即随着访问频率的增加，用户基于比率的多样性降低了，说明多样性是影响用户留存的一个重要因素。

这里，基础比率多样性（Ratio-based Diversity）定义为用户消费的物品集合中不同 Topic 的物品占比，其计算公式为：

其中 ｜S｜是用户消费过的物品集合（包括消费过的重复性物品）

附论文原文地址：https://dl.acm.org/doi/pdf/10.1













